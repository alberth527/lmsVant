import{N as L,B as N,C as w,I as D}from"./index-qFpobu3P.js";import{T as E,C as I}from"./index-BMv1WVdY.js";import"./index-1Fa4O1GC.js";import{E as $}from"./index-CMQtZDvp.js";import{T as z,a as U}from"./index-B11nnFSB.js";import{C as V}from"./index-Ch_oCS73.js";import{_ as F,u as W,r as A,g as d,l as G,a as c,c as o,b as a,w as n,F as M,i as P,e as R,o as r,h as j,f as v,A as q,t as f}from"./index-B6FFb5jA.js";const J={class:"exchange-history"},K={class:"content"},O={class:"stats-section"},Q={class:"filter-section"},X={class:"history-list"},Y={key:0,class:"empty-state"},Z={key:1},tt={class:"record-footer"},et={class:"points-info"},ot={class:"points-text"},st={class:"record-time"},at={__name:"ExchangeHistory",setup(nt){R();const m=W(),i=A("all"),l=d(()=>m.exchangeHistory||[]),p=d(()=>i.value==="all"?l.value:l.value.filter(e=>i.value==="processing"?e.status==="處理中":i.value==="completed"?e.status==="已完成":!0)),g=d(()=>l.value.reduce((e,t)=>e+(t.points||0),0)),h=e=>new Date(e).toLocaleDateString("zh-TW",{year:"numeric",month:"2-digit",day:"2-digit"}),y=e=>new Date(e).toLocaleTimeString("zh-TW",{hour:"2-digit",minute:"2-digit"});return G(()=>{setTimeout(()=>{const e=exchangeStore.exchangeHistory;if(e.length>1)for(let t=1;t<e.length;t++)e[t].status="已完成"},2e3)}),(e,t)=>{const b=L,u=w,T=V,_=U,x=z,k=$,C=N,S=E,B=D,H=I;return r(),c("div",J,[o(b,{title:"兌換紀錄","left-arrow":"",onClickLeft:t[0]||(t[0]=s=>e.$router.back())}),a("div",K,[a("div",O,[o(T,{title:"兌換統計"},{default:n(()=>[o(u,{title:"總兌換次數",value:l.value.length},null,8,["value"]),o(u,{title:"總消耗點數",value:g.value.toLocaleString()},null,8,["value"]),o(u,{title:"目前剩餘點數",value:(j(m).userInfo.points||0).toLocaleString()},null,8,["value"])]),_:1})]),a("div",Q,[o(x,{active:i.value,"onUpdate:active":t[1]||(t[1]=s=>i.value=s)},{default:n(()=>[o(_,{title:"全部",name:"all"}),o(_,{title:"處理中",name:"processing"}),o(_,{title:"已完成",name:"completed"})]),_:1},8,["active"])]),a("div",X,[p.value.length===0?(r(),c("div",Y,[o(k,{description:"暫無兌換紀錄"}),o(C,{type:"primary",onClick:t[2]||(t[2]=s=>e.$router.push("/products"))},{default:n(()=>t[3]||(t[3]=[v(" 立即兌換 ")])),_:1,__:[3]})])):(r(),c("div",Z,[(r(!0),c(M,null,P(p.value,s=>(r(),q(H,{key:s.id,thumb:s.productImage,title:s.productName,desc:h(s.date),class:"history-item"},{tags:n(()=>[o(S,{type:"success",class:"status-tag"},{default:n(()=>t[4]||(t[4]=[v(" 兌換成功 ")])),_:1,__:[4]})]),footer:n(()=>[a("div",tt,[a("div",et,[o(B,{name:"gold-coin-o",size:"16",color:"#ff9500"}),a("span",ot,f(s.points)+" 點",1)]),a("div",st,f(y(s.date)),1)])]),_:2},1032,["thumb","title","desc"]))),128))]))])])])}}},mt=F(at,[["__scopeId","data-v-9ef6ce2b"]]);export{mt as default};
