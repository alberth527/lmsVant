import{d as C,c as n,T as A,r as z,y as O,g as R,j as H,E as M,l as U,n as E,H as V,R as K,p as _,F as Z,f as q}from"./index-B6FFb5jA.js";import{m as T,t as B,c as I,Z as G,I as F,w as $,n as v,x,y as k,M as J}from"./index-qFpobu3P.js";const[Q,D]=I("tag"),W={size:String,mark:Boolean,show:B,type:T("default"),color:String,plain:Boolean,round:Boolean,textColor:String,closeable:Boolean};var X=C({name:Q,props:W,emits:["close"],setup(e,{slots:r,emit:s}){const d=t=>{t.stopPropagation(),s("close",t)},l=()=>e.plain?{color:e.textColor||e.color,borderColor:e.color}:{color:e.textColor,background:e.color},c=()=>{var t;const{type:S,mark:h,plain:o,round:g,size:u,closeable:b}=e,m={mark:h,plain:o,round:g};u&&(m[u]=u);const f=b&&n(F,{name:"cross",class:[D("close"),G],onClick:d},null);return n("span",{style:l(),class:D([m,S])},[(t=r.default)==null?void 0:t.call(r),f])};return()=>n(A,{name:e.closeable?"van-fade":void 0},{default:()=>[e.show?c():null]})}});const Y=$(X),[p,P]=I("image"),ee={src:String,alt:String,fit:String,position:String,round:Boolean,block:Boolean,width:v,height:v,radius:v,lazyLoad:Boolean,iconSize:v,showError:B,errorIcon:T("photo-fail"),iconPrefix:String,showLoading:B,loadingIcon:T("photo"),crossorigin:String,referrerpolicy:String,decoding:String};var re=C({name:p,props:ee,emits:["load","error"],setup(e,{emit:r,slots:s}){const d=z(!1),l=z(!0),c=z(),{$Lazyload:t}=O().proxy,S=R(()=>{const a={width:x(e.width),height:x(e.height)};return k(e.radius)&&(a.overflow="hidden",a.borderRadius=x(e.radius)),a});H(()=>e.src,()=>{d.value=!1,l.value=!0});const h=a=>{l.value&&(l.value=!1,r("load",a))},o=()=>{const a=new Event("load");Object.defineProperty(a,"target",{value:c.value,enumerable:!0}),h(a)},g=a=>{d.value=!0,l.value=!1,r("error",a)},u=(a,y,L)=>L?L():n(F,{name:a,size:e.iconSize,class:y,classPrefix:e.iconPrefix},null),b=()=>{if(l.value&&e.showLoading)return n("div",{class:P("loading")},[u(e.loadingIcon,P("loading-icon"),s.loading)]);if(d.value&&e.showError)return n("div",{class:P("error")},[u(e.errorIcon,P("error-icon"),s.error)])},m=()=>{if(d.value||!e.src)return;const a={alt:e.alt,class:P("img"),decoding:e.decoding,style:{objectFit:e.fit,objectPosition:e.position},crossorigin:e.crossorigin,referrerpolicy:e.referrerpolicy};return e.lazyLoad?V(n("img",_({ref:c},a),null),[[K("lazy"),e.src]]):n("img",_({ref:c,src:e.src,onLoad:h,onError:g},a),null)},f=({el:a})=>{const y=()=>{a===c.value&&l.value&&o()};c.value?y():E(y)},w=({el:a})=>{a===c.value&&!d.value&&g()};return t&&J&&(t.$on("loaded",f),t.$on("error",w),M(()=>{t.$off("loaded",f),t.$off("error",w)})),U(()=>{E(()=>{var a;(a=c.value)!=null&&a.complete&&!e.lazyLoad&&o()})}),()=>{var a;return n("div",{class:P({round:e.round,block:e.block}),style:S.value},[m(),b(),(a=s.default)==null?void 0:a.call(s)])}}});const ne=$(re),[ae,i]=I("card"),ie={tag:String,num:v,desc:String,thumb:String,title:String,price:v,centered:Boolean,lazyLoad:Boolean,currency:T("Â¥"),thumbLink:String,originPrice:v};var te=C({name:ae,props:ie,emits:["clickThumb"],setup(e,{slots:r,emit:s}){const d=()=>{if(r.title)return r.title();if(e.title)return n("div",{class:[i("title"),"van-multi-ellipsis--l2"]},[e.title])},l=()=>{if(r.tag||e.tag)return n("div",{class:i("tag")},[r.tag?r.tag():n(Y,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},c=()=>r.thumb?r.thumb():n(ne,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),t=()=>{if(r.thumb||e.thumb)return n("a",{href:e.thumbLink,class:i("thumb"),onClick:o=>s("clickThumb",o)},[c(),l()])},S=()=>{if(r.desc)return r.desc();if(e.desc)return n("div",{class:[i("desc"),"van-ellipsis"]},[e.desc])},h=()=>{const o=e.price.toString().split(".");return n("div",null,[n("span",{class:i("price-currency")},[e.currency]),n("span",{class:i("price-integer")},[o[0]]),o.length>1&&n(Z,null,[q("."),n("span",{class:i("price-decimal")},[o[1]])])])};return()=>{var o,g,u;const b=r.num||k(e.num),m=r.price||k(e.price),f=r["origin-price"]||k(e.originPrice),w=b||m||f||r.bottom,a=m&&n("div",{class:i("price")},[r.price?r.price():h()]),y=f&&n("div",{class:i("origin-price")},[r["origin-price"]?r["origin-price"]():`${e.currency} ${e.originPrice}`]),L=b&&n("div",{class:i("num")},[r.num?r.num():`x${e.num}`]),N=r.footer&&n("div",{class:i("footer")},[r.footer()]),j=w&&n("div",{class:i("bottom")},[(o=r["price-top"])==null?void 0:o.call(r),a,y,L,(g=r.bottom)==null?void 0:g.call(r)]);return n("div",{class:i()},[n("div",{class:i("header")},[t(),n("div",{class:i("content",{centered:e.centered})},[n("div",null,[d(),S(),(u=r.tags)==null?void 0:u.call(r)]),j])]),N])}}});const le=$(te);export{le as C,Y as T};
