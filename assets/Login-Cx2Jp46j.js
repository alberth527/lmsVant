import{t as S,n as I,c as T,u as $,a as q,F as L,p as M,w as k,m as U,N as D,I as O,B as R}from"./index-I69ywWr9.js";import"./index-B0rN40JS.js";import{C as j}from"./index-C-qcxUgF.js";import{F as z}from"./index-RJz_RwjX.js";import{d as x,c as i,_ as G,u as K,r as F,a as W,b as u,w,e as Y,o as H,f as N}from"./index-NED_JcNa.js";import{s as P}from"./function-call-BcP60zGU.js";const[J,Q]=T("form"),X={colon:Boolean,disabled:Boolean,readonly:Boolean,required:[Boolean,String],showError:Boolean,labelWidth:I,labelAlign:String,inputAlign:String,scrollToError:Boolean,scrollToErrorPosition:String,validateFirst:Boolean,submitOnEnter:S,showErrorMessage:S,errorMessageAlign:String,validateTrigger:{type:[String,Array],default:"onBlur"}};var Z=x({name:J,props:X,emits:["submit","failed"],setup(a,{emit:d,slots:c}){const{children:s,linkChildren:m}=$(L),f=e=>e?s.filter(t=>e.includes(t.name)):s,p=e=>new Promise((t,o)=>{const l=[];f(e).reduce((C,A)=>C.then(()=>{if(!l.length)return A.validate().then(E=>{E&&l.push(E)})}),Promise.resolve()).then(()=>{l.length?o(l):t()})}),n=e=>new Promise((t,o)=>{const l=f(e);Promise.all(l.map(r=>r.validate())).then(r=>{r=r.filter(Boolean),r.length?o(r):t()})}),y=e=>{const t=s.find(o=>o.name===e);return t?new Promise((o,l)=>{t.validate().then(r=>{r?l(r):o()})}):Promise.reject()},_=e=>typeof e=="string"?y(e):a.validateFirst?p(e):n(e),g=e=>{typeof e=="string"&&(e=[e]),f(e).forEach(o=>{o.resetValidation()})},V=()=>s.reduce((e,t)=>(e[t.name]=t.getValidationStatus(),e),{}),h=(e,t)=>{s.some(o=>o.name===e?(o.$el.scrollIntoView(t),!0):!1)},b=()=>s.reduce((e,t)=>(t.name!==void 0&&(e[t.name]=t.formValue.value),e),{}),B=()=>{const e=b();_().then(()=>d("submit",e)).catch(t=>{d("failed",{values:e,errors:t});const{scrollToError:o,scrollToErrorPosition:l}=a;o&&t[0].name&&h(t[0].name,l?{block:l}:void 0)})},v=e=>{M(e),B()};return m({props:a}),q({submit:B,validate:_,getValues:b,scrollToField:h,resetValidation:g,getValidationStatus:V}),()=>{var e;return i("form",{class:Q(),onSubmit:v},[(e=c.default)==null?void 0:e.call(c)])}}});const ee=k(Z),[te,ne]=T("divider"),oe={dashed:Boolean,hairline:S,vertical:Boolean,contentPosition:U("center")};var se=x({name:te,props:oe,setup(a,{slots:d}){return()=>{var c;return i("div",{role:"separator",class:ne({dashed:a.dashed,hairline:a.hairline,vertical:a.vertical,[`content-${a.contentPosition}`]:!!d.default&&!a.vertical})},[!a.vertical&&((c=d.default)==null?void 0:c.call(d))])}}});const ae=k(se),le={class:"login-container"},re={class:"login-content"},ie={class:"logo-section"},de={class:"login-btn"},ue={class:"demo-accounts"},ce={__name:"Login",setup(a){const d=Y(),c=K(),s=F({username:"",password:""}),m=F(!1),f=async()=>{m.value=!0;try{c.login(s.value.username,s.value.password)?(P({type:"success",message:"登入成功！"}),d.push("/dashboard")):P({type:"danger",message:"帳號或密碼錯誤"})}catch{P({type:"danger",message:"登入失敗，請稍後再試"})}finally{m.value=!1}};return(p,n)=>{const y=D,_=O,g=z,V=j,h=R,b=ee,B=ae;return H(),W("div",le,[i(y,{title:"會員登入"}),u("div",re,[u("div",ie,[i(_,{name:"user-circle-o",size:"80",color:"#1989fa"}),n[2]||(n[2]=u("h2",null,"會員紅利兌換系統",-1))]),i(b,{onSubmit:f},{default:w(()=>[i(V,{inset:""},{default:w(()=>[i(g,{modelValue:s.value.username,"onUpdate:modelValue":n[0]||(n[0]=v=>s.value.username=v),name:"username",label:"帳號",placeholder:"請輸入帳號",rules:[{required:!0,message:"請填寫帳號"}]},null,8,["modelValue"]),i(g,{modelValue:s.value.password,"onUpdate:modelValue":n[1]||(n[1]=v=>s.value.password=v),type:"password",name:"password",label:"密碼",placeholder:"請輸入密碼",rules:[{required:!0,message:"請填寫密碼"}]},null,8,["modelValue"])]),_:1}),u("div",de,[i(h,{round:"",block:"",type:"primary","native-type":"submit",loading:m.value},{default:w(()=>n[3]||(n[3]=[N(" 登入 ")])),_:1,__:[3]},8,["loading"])])]),_:1}),u("div",ue,[i(B,null,{default:w(()=>n[4]||(n[4]=[N("測試帳號")])),_:1,__:[4]}),n[5]||(n[5]=u("p",null,"帳號: test1 / 密碼: 123456 (1500點)",-1)),n[6]||(n[6]=u("p",null,"帳號: test2 / 密碼: 123456 (2000點)",-1)),n[7]||(n[7]=u("p",null,"帳號: admin / 密碼: 123456 (5000點)",-1))])])])}}},he=G(ce,[["__scopeId","data-v-e62a29f2"]]);export{he as default};
