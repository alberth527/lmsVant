import{p as L,P as z,a as M,m as W,u as j}from"./function-call-BE3AcPyQ.js";import{d as x,r as T,c,g as O,m as q,B as G,p as I,C as Q}from"./index-B6FFb5jA.js";import{t as w,c as A,O as V,u as Y,w as N,j as g,P as J,v as X,a as Z,B as k,Q as ee,k as te,x as oe,m as ne,E as ae,n as se,R as D,S as ce,q as le,T as re,U as ie,M as ue}from"./index-qFpobu3P.js";const[R,E]=A("action-bar"),F=Symbol(R),de={placeholder:Boolean,safeAreaInsetBottom:w};var me=x({name:R,props:de,setup(e,{slots:n}){const o=T(),a=V(o,E),{linkChildren:s}=Y(F);s();const u=()=>{var f;return c("div",{ref:o,class:[E(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(f=n.default)==null?void 0:f.call(n)])};return()=>e.placeholder?a(u):u()}});const fe=N(me),[pe,he]=A("action-bar-button"),ge=g({},ee,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Be=x({name:pe,props:ge,setup(e,{slots:n}){const o=J(),{parent:a,index:s}=X(F),u=O(()=>{if(a){const r=a.children[s.value-1];return!(r&&"isButton"in r)}}),f=O(()=>{if(a){const r=a.children[s.value+1];return!(r&&"isButton"in r)}});return Z({isButton:!0}),()=>{const{type:r,icon:p,text:h,color:C,loading:v,disabled:y}=e;return c(k,{class:he([r,{last:f.value,first:u.value}]),size:"large",type:r,icon:p,color:C,loading:v,disabled:y,onClick:o},{default:()=>[n.default?n.default():h]})}}});const _=N(Be),[be,i,b]=A("dialog"),we=g({},M,{title:String,theme:String,width:se,message:[String,Function],callback:Function,allowHtml:Boolean,className:ae,transition:ne("van-dialog-bounce"),messageAlign:String,closeOnPopstate:w,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:w,closeOnClickOverlay:Boolean,keyboardEnabled:w,destroyOnClose:Boolean}),Ce=[...L,"transition","closeOnPopstate","destroyOnClose"];var ve=x({name:be,props:we,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:n,slots:o}){const a=T(),s=q({confirm:!1,cancel:!1}),u=t=>n("update:show",t),f=t=>{var l;u(!1),(l=e.callback)==null||l.call(e,t)},r=t=>()=>{e.show&&(n(t),e.beforeClose?(s[t]=!0,ce(e.beforeClose,{args:[t],done(){f(t),s[t]=!1},canceled(){s[t]=!1}})):f(t))},p=r("cancel"),h=r("confirm"),C=G(t=>{var l,d;if(!e.keyboardEnabled||t.target!==((d=(l=a.value)==null?void 0:l.popupRef)==null?void 0:d.value))return;({Enter:e.showConfirmButton?h:D,Escape:e.showCancelButton?p:D})[t.key](),n("keydown",t)},["enter","esc"]),v=()=>{const t=o.title?o.title():e.title;if(t)return c("div",{class:i("header",{isolated:!e.message&&!o.default})},[t])},y=t=>{const{message:l,allowHtml:d,messageAlign:m}=e,B=i("message",{"has-title":t,[m]:m}),P=le(l)?l():l;return d&&typeof P=="string"?c("div",{class:B,innerHTML:P},null):c("div",{class:B},[P])},H=()=>{if(o.default)return c("div",{class:i("content")},[o.default()]);const{title:t,message:l,allowHtml:d}=e;if(l){const m=!!(t||o.title);return c("div",{key:d?1:0,class:i("content",{isolated:!m})},[y(m)])}},K=()=>c("div",{class:[ie,i("footer")]},[e.showCancelButton&&c(k,{size:"large",text:e.cancelButtonText||b("cancel"),class:i("cancel"),style:{color:e.cancelButtonColor},loading:s.cancel,disabled:e.cancelButtonDisabled,onClick:p},null),e.showConfirmButton&&c(k,{size:"large",text:e.confirmButtonText||b("confirm"),class:[i("confirm"),{[re]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:s.confirm,disabled:e.confirmButtonDisabled,onClick:h},null)]),$=()=>c(fe,{class:i("footer")},{default:()=>[e.showCancelButton&&c(_,{type:"warning",text:e.cancelButtonText||b("cancel"),class:i("cancel"),color:e.cancelButtonColor,loading:s.cancel,disabled:e.cancelButtonDisabled,onClick:p},null),e.showConfirmButton&&c(_,{type:"danger",text:e.confirmButtonText||b("confirm"),class:i("confirm"),color:e.confirmButtonColor,loading:s.confirm,disabled:e.confirmButtonDisabled,onClick:h},null)]}),U=()=>o.footer?o.footer():e.theme==="round-button"?$():K();return()=>{const{width:t,title:l,theme:d,message:m,className:B}=e;return c(z,I({ref:a,role:"dialog",class:[i([d]),B],style:{width:oe(t)},tabindex:0,"aria-labelledby":l||m,onKeydown:C,"onUpdate:show":u},te(e,Ce)),{default:()=>[v(),H(),U()]})}}});let S;const ye={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1,destroyOnClose:!1};let Pe=g({},ye);function ke(){({instance:S}=W({setup(){const{state:n,toggle:o}=j();return()=>c(ve,I(n,{"onUpdate:show":o}),null)}}))}function Se(e){return ue?new Promise((n,o)=>{S||ke(),S.open(g({},Pe,e,{callback:a=>{(a==="confirm"?n:o)(a)}}))}):Promise.resolve(void 0)}const Oe=e=>Se(g({showCancelButton:!0},e)),De=Q("products",()=>{const e=T([{id:1,name:"星巴克咖啡券",points:300,image:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=150&h=150&fit=crop&crop=center",description:"星巴克任一飲品兌換券，使用期限3個月",stock:50},{id:2,name:"全家便利商店100元券",points:200,image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=150&h=150&fit=crop&crop=center",description:"全家便利商店100元商品兌換券",stock:30},{id:3,name:"誠品書店200元券",points:400,image:"https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=150&h=150&fit=crop&crop=center",description:"誠品書店200元圖書兌換券",stock:20},{id:4,name:"電影票券",points:500,image:"https://images.unsplash.com/photo-1489599849877-2b6c0e6a3dcc?w=150&h=150&fit=crop&crop=center",description:"威秀影城電影票券一張",stock:15},{id:5,name:"iPad Air",points:15e3,image:"https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=150&h=150&fit=crop&crop=center",description:"Apple iPad Air 64GB WiFi版",stock:2},{id:6,name:"AirPods Pro",points:8e3,image:"https://images.unsplash.com/photo-1606220945770-b5b6c2c55bf1?w=150&h=150&fit=crop&crop=center",description:"Apple AirPods Pro 無線耳機",stock:5},{id:7,name:"7-11購物金500元",points:500,image:"https://images.unsplash.com/photo-1556742049-0cfed4f6a45d?w=150&h=150&fit=crop&crop=center",description:"7-11便利商店購物金，全台門市可使用",stock:100},{id:8,name:"Netflix月卡",points:400,image:"https://images.unsplash.com/photo-1574375927938-d5a98e8ffe85?w=150&h=150&fit=crop&crop=center",description:"Netflix一個月高級方案",stock:25}]),n=a=>e.value.find(s=>s.id===parseInt(a));return{products:e,getProductById:n,updateProductStock:(a,s)=>{const u=n(a);u&&(u.stock=s)}}});export{Oe as s,De as u};
